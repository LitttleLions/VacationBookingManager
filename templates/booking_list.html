{% extends "base.html" %}

{% block title %}{{ _('Booking List') }}{% endblock %}

{% block content %}
<h2>{{ _('Booking List') }}</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<form method="GET" action="{{ url_for('booking_list') }}">
    <input type="text" name="filter" placeholder="{{ _('Filter by guest, apartment, status, or type') }}" value="{{ request.args.get('filter', '') }}">
    <button type="submit">{{ _('Filter') }}</button>
</form>

<table>
    <thead>
        <tr>
            <th>{{ _('Guest Name') }}</th>
            <th>{{ _('Booking Date') }}</th>
            <th>{{ _('Apartment Name') }}</th>
            <th>{{ _('Status') }}</th>
            <th>{{ _('Type') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for booking in bookings %}
        <tr class="booking-item" data-guest-name="{{ booking.guest_name }}" data-booking-date="{{ booking.booking_date }}" data-apartment-name="{{ booking.apartment_name }}" data-check-in="{{ booking.check_in }}" data-check-out="{{ booking.check_out }}" data-guests="{{ booking.guests }}" data-total-price="{{ booking.total_price }}" data-status="{{ booking.status }}" data-type="{{ booking.type }}">
            <td>{{ booking.guest_name }}</td>
            <td>{{ booking.booking_date }}</td>
            <td>{{ booking.apartment_name }}</td>
            <td>{{ booking.status }}</td>
            <td>{{ booking.type }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
