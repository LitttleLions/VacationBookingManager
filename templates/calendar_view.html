{% extends "base.html" %}

{% block title %}{{ _('Calendar View') }}{% endblock %}

{% block content %}
<h2>{{ _('Calendar View') }} - {{ month|month_name }} {{ year }}</h2>

<div class="calendar-navigation">
    <a href="{{ url_for('calendar_view', year=prev_month.year, month=prev_month.month) }}">&lt; {{ _('Previous Month') }}</a>
    <a href="{{ url_for('calendar_view', year=next_month.year, month=next_month.month) }}">{{ _('Next Month') }} &gt;</a>
</div>

<div class="calendar">
    <table>
        <thead>
            <tr>
                <th>{{ _('Apartment') }}</th>
                {% for date in month_dates %}
                <th>{{ date.strftime('%d') }}<br>{{ date.strftime('%a') }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for apartment in apartments %}
            <tr>
                <td>{{ apartment }}</td>
                {% for date in month_dates %}
                <td class="calendar-cell">
                    {% for booking in calendar_data[apartment][date] %}
                    <div class="booking-item" title="{{ booking.guest_name }} - {{ booking.check_in }} to {{ booking.check_out }}">
                        {{ booking.guest_name[:10] }}...
                    </div>
                    {% endfor %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
