{% extends "base.html" %}

{% block title %}{{ _('Calendar View') }}{% endblock %}

{% block content %}
<h2>{{ _('Calendar View') }} - {{ _('Week of') }} {{ current_date.strftime('%B %d, %Y') }}</h2>

<div class="calendar-navigation">
    <a href="{{ url_for('calendar_view', date=prev_week) }}">&lt; {{ _('Previous Week') }}</a>
    <a href="{{ url_for('calendar_view', date=next_week) }}">{{ _('Next Week') }} &gt;</a>
</div>

<div class="calendar">
    <table>
        <thead>
            <tr>
                <th>{{ _('Apartment') }}</th>
                {% for date in week_dates %}
                <th>{{ date.strftime('%a') }}<br>{{ date.strftime('%d/%m') }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for apartment in apartments %}
            <tr>
                <td>{{ apartment }}</td>
                {% for date in week_dates %}
                <td class="calendar-cell">
                    {% for booking in calendar_data[apartment][date] %}
                    <div class="booking-item" title="{{ booking.guest_name }} - {{ booking.check_in }} to {{ booking.check_out }}">
                        {{ booking.guest_name[:10] }}...
                    </div>
                    {% endfor %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
